## 小兔鲜儿

> Vue3.0 小兔鲜儿电商是对标网易严选的综合品类的网上商城项目，现在除了顶级的一些电商平台之外，越来越多的企业都会做自己的垂直领域的商城，如小米商城、华为商城等，市场空间巨大，人才较为紧缺。本项目涵盖了电商的核心业务，首页加载性能优化，本地线上购物车，订单管理，第三方支付。

### 技术栈

Vue3 + vuex + vue-router + @vueuse/core + vee-validate + vuex-persistedstate

### 主要业务

#### 首页开发

- 项目职责描述：负责首页页面的组件化开发，分类导航、商品推荐、楼层数据的铺设，并进行首屏渲染的性能优化；对数据优化和图片懒加载做了封装复用处理

> 谈谈电商首页如何做性能优化？

答：电商页面由于比较长，加载的资源比较多，所以我们做的主要是网络资源加载层面的优化

1. 针对于组件数据，我们做了懒加载处理，只有进入到视口区域的组件才正式发送接口请求，把之前在生命周期中发送的请求接管过来，由自己控制

2. 针对于图片资源繁多的情况，我们封装了图片懒加载指令，对于图片资源做加载控制，防止资源加载堵塞

> 做了哪些提效的事儿？

答：

1. 封装数据懒加载的钩子函数
1. 封装图片懒加载的全局指令

#### 商品分类

- 项目职责描述：实现商品分类页面和分类下推荐商品数据铺设，解决动态路由缓存问题

> 讲件动态路由缓存？

1. 使用 key 解决缓存问题
2. 使用 watch 监听 params 变化，重新发送请求
3. 使用 onBeforeRouteUpdate 钩子函数

#### 商品详情

- 项目职责描述：负责商品详情数据铺设，实现地址选择、sku 选择、加入购物功能，并对详情图片列表做性能优化

#### 购物车

- 项目职责描述：使用 vuex 维护购物车数据，实现购物车编辑修改功能；解决 vuex 双向绑定问题，支持购物车未登录和登录状态下使用

> 谈谈购物车是如何实现的遇到了哪些难点？

答：
实现：

1. 购物车主要是采用了 vuex 进行的数据管理，因为购物车的数据在很多个组件中都需要操作，用 vuex 可以方便操作数据
2. 购物车主要功能包括购物车的加入、删除、单选、多选等操作，基本上都是围绕 vuex 展开的
3. 为了刷新不丢失数据，做了 vuex 数据持久化
4. 满足未登录和登录两种情况购物车使用支持，需要在登录后，合并未登录情况下存储的购物车数据

难点：

1. 在异步 action 中区分登录状态，处理购物车业务需求
2. 购物车操作中，双向绑定 vuex 数据修改问题 =》v-model => 写成=》**:modelValue + @update:modelValue** =》最终通过 mutations 修改

#### 创建订单

- 项目职责描述：负责加入购物车后，商品选择下单，用户确认后，创建订单并准备支付

#### 下单支付

- 项目职责描述：配合后台联调，实现支付倒计时，倒计时内跳转支付宝平台，进行支付并展示支付结果

> 在线支付的流程和实现？

答： 在线支付的主要流程是有三部分构成，前端 =》 后端 =》支付宝三方服务。

1. **准备支付地址**，携带订单 ID、回跳地址参数
2. **准备回跳地址页面**，显示支付结果
